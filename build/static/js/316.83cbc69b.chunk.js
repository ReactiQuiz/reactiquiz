"use strict";(self.webpackChunkreactiquiz=self.webpackChunkreactiquiz||[]).push([[316],{441:(t,e,n)=>{n.d(e,{A:()=>p});var o=n(9379),r=n(45),i=(n(5043),n(7395)),a=n(3684),s=n(809),l=n(5895),c=n(1202),d=n(579);const x=["node"],h=["node"];const p=function(t){let{text:e}=t;return e?(0,d.jsx)(i.oz,{remarkPlugins:[a.A],rehypePlugins:[s.A],components:{p:t=>{let{node:e}=t,n=(0,r.A)(t,x);return(0,d.jsx)(l.A,(0,o.A)({variant:"inherit",component:"div",sx:{mt:1,mb:1}},n))},a:t=>{let{node:e}=t,n=(0,r.A)(t,h);return(0,d.jsx)(c.A,(0,o.A)({},n))}},children:e}):null}},883:(t,e,n)=>{n.d(e,{A:()=>o});const o=(0,n(7675).Ay)()},4943:(t,e,n)=>{n.d(e,{A:()=>i});var o=n(8480),r=n(4265);function i(t){let{props:e,name:n,defaultTheme:i,themeId:a}=t,s=(0,r.A)(i);return a&&(s=s[a]||s),(0,o.A)({theme:s,name:n,props:e})}},7552:(t,e,n)=>{n.r(e),n.d(e,{default:()=>W});var o=n(9002),r=n(3969),i=n(172),a=n(5895),s=n(6803),l=n(2097),c=n(298),d=n(267),x=n(9992),h=n(579);const p=(0,x.A)((0,h.jsx)("path",{d:"M10.59 9.17 5.41 4 4 5.41l5.17 5.17zM14.5 4l2.04 2.04L4 18.59 5.41 20 17.96 7.46 20 9.5V4zm.33 9.41-1.41 1.41 3.13 3.13L14.5 20H20v-5.5l-2.04 2.04z"}),"Shuffle");var u=n(5043),m=n(411),A=n(9468);var f=n(2579);const g=(0,x.A)((0,h.jsx)("path",{d:"M17.77 3.77 16 2 6 12l10 10 1.77-1.77L9.54 12z"}),"ArrowBackIosNew"),j=(0,x.A)((0,h.jsx)("path",{d:"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"}),"ArrowForwardIos");var C=n(9379),b=n(4799),v=n(4527),w=n(5315),y=n(2394),I=n(3759),z=n(9801),S=n(9826);const k=(0,x.A)((0,h.jsx)("path",{d:"M15 21h2v-2h-2zm4-12h2V7h-2zM3 5v14c0 1.1.9 2 2 2h4v-2H5V5h4V3H5c-1.1 0-2 .9-2 2m16-2v2h2c0-1.1-.9-2-2-2m-8 20h2V1h-2zm8-6h2v-2h-2zM15 5h2V3h-2zm4 8h2v-2h-2zm0 8c1.1 0 2-.9 2-2h-2z"}),"Flip"),P=(0,x.A)((0,h.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckCircle");var q=n(441);const L=function(t){let{frontText:e,options:n,correctOptionId:o,explanation:i,frontTitle:s="",backTitle:l="Correct Answer",accentColor:c}=t;const x=(0,d.A)(),[p,m]=(0,u.useState)(!1),A=c||x.palette.primary.main,g=null===n||void 0===n?void 0:n.find((t=>t.id===o)),j=g?"".concat(g.id.toUpperCase(),". ").concat(g.text):"Answer not available",L="380px",H={position:"absolute",width:"100%",height:"100%",minHeight:L,backfaceVisibility:"hidden",display:"flex",flexDirection:"column",p:{xs:2,sm:3},overflowY:"auto",border:"2px solid ".concat(A),borderRadius:x.shape.borderRadius,boxSizing:"border-box"};return(0,h.jsxs)(r.A,{onClick:()=>m(!p),sx:{perspective:"1000px",width:"100%",minHeight:L,cursor:"pointer",position:"relative"},children:[(0,h.jsxs)(r.A,{sx:{position:"relative",width:"100%",height:"100%",minHeight:L,transition:"transform 0.6s",transformStyle:"preserve-3d",transform:p?"rotateY(180deg)":"rotateY(0deg)"},children:[(0,h.jsx)(b.A,{elevation:3,sx:(0,C.A)((0,C.A)({},H),{},{justifyContent:"flex-start",alignItems:"flex-start",textAlign:"left"}),children:(0,h.jsxs)(r.A,{sx:{display:"flex",flexDirection:"column",flexGrow:1,width:"100%"},children:[(0,h.jsx)(a.A,{variant:"h6",gutterBottom:!0,sx:{color:A,fontWeight:"bold",mb:1.5,width:"100%",textAlign:"center"},children:s}),(0,h.jsx)(r.A,{sx:{mb:2,width:"100%",whiteSpace:"pre-wrap",flexGrow:1,fontSize:"1.1rem"},children:(0,h.jsx)(q.A,{text:e})}),(0,h.jsx)(v.A,{sx:{width:"100%",my:1}}),(0,h.jsx)(a.A,{variant:"subtitle1",sx:{mb:1,fontWeight:"medium"},children:"Options:"}),(0,h.jsx)(w.A,{dense:!0,sx:{width:"100%",py:0},children:n&&n.map((t=>(0,h.jsx)(y.Ay,{disablePadding:!0,sx:{mb:.5},children:(0,h.jsx)(I.A,{label:(0,h.jsx)(q.A,{text:"".concat(t.id.toUpperCase(),". ").concat(t.text)}),variant:"outlined",sx:{width:"100%",justifyContent:"flex-start",py:1.5,height:"auto","& .MuiChip-label":{whiteSpace:"normal",textAlign:"left",lineHeight:"1.4"},borderColor:(0,S.X4)(A,.5)}})},t.id)))})]})}),(0,h.jsx)(b.A,{elevation:3,sx:(0,C.A)((0,C.A)({},H),{},{transform:"rotateY(180deg)",justifyContent:"center",alignItems:"center",textAlign:"center"}),children:(0,h.jsxs)(r.A,{sx:{display:"flex",flexDirection:"column",flexGrow:1,width:"100%",justifyContent:"center",alignItems:"center"},children:[(0,h.jsx)(a.A,{variant:"h6",gutterBottom:!0,sx:{color:A,fontWeight:"bold",mb:2},children:l}),(0,h.jsxs)(r.A,{sx:{p:1.5,mb:2,backgroundColor:(0,S.X4)(x.palette.success.main,.15),border:"1px solid ".concat(x.palette.success.main),borderRadius:1,display:"flex",alignItems:"center",width:"auto",minWidth:"60%",maxWidth:"95%",boxSizing:"border-box"},children:[(0,h.jsx)(z.A,{sx:{minWidth:"auto",mr:1,color:x.palette.success.main},children:(0,h.jsx)(P,{})}),(0,h.jsx)(r.A,{sx:{fontWeight:"medium",color:x.palette.success.main,textAlign:"left",fontSize:"1.1rem"},children:(0,h.jsx)(q.A,{text:j})})]}),i&&(0,h.jsxs)(r.A,{sx:{width:"100%",textAlign:"left",mt:1,flexGrow:1,overflowY:"auto",maxHeight:"150px"},children:[(0,h.jsx)(a.A,{variant:"subtitle1",sx:{fontWeight:"medium"},children:"Explanation:"}),(0,h.jsx)(r.A,{sx:{color:"text.secondary"},children:(0,h.jsx)(q.A,{text:i})})]})]})})]}),(0,h.jsx)(r.A,{sx:{position:"absolute",bottom:8,right:8,zIndex:10},children:(0,h.jsx)(f.A,{onClick:t=>{t&&t.stopPropagation(),m(!p)},"aria-label":"flip card",size:"medium",sx:{color:A,backgroundColor:(0,S.X4)(x.palette.background.default,.85),"&:hover":{backgroundColor:(0,S.X4)(x.palette.background.paper,.95)},boxShadow:x.shadows[2]},children:(0,h.jsx)(k,{})})})]})};const H=function(t){let{currentCard:e,onNextCard:n,onPreviousCard:o,accentColor:i,totalCards:s,currentIndex:l}=t;const x=(0,d.A)(),p=i||x.palette.primary.main;return e?(0,h.jsxs)(r.A,{sx:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,h.jsxs)(a.A,{variant:"caption",color:"text.secondary",sx:{mb:1},children:["Card ",l+1," of ",s," (Click card to flip)"]}),(0,h.jsx)(r.A,{sx:{width:"100%",minHeight:"380px",perspective:"1000px",mb:2.5},children:(0,h.jsx)(L,{frontText:e.frontText,options:e.options,correctOptionId:e.correctOptionId,explanation:e.explanation,accentColor:p,frontTitle:"Question ".concat(l+1)})}),(0,h.jsxs)(c.A,{direction:"row",spacing:2,justifyContent:"center",alignItems:"center",sx:{width:"100%",mb:1},children:[(0,h.jsx)(f.A,{onClick:o,"aria-label":"previous card",sx:{color:p},disabled:s<=1,children:(0,h.jsx)(g,{})}),(0,h.jsxs)(a.A,{variant:"body2",sx:{color:x.palette.text.secondary,minWidth:"60px",textAlign:"center"},children:[l+1," / ",s]}),(0,h.jsx)(f.A,{onClick:n,"aria-label":"next card",sx:{color:p},disabled:s<=1,children:(0,h.jsx)(j,{})})]})]}):(0,h.jsx)(a.A,{children:"No flashcard to display."})};var U=n(3777);const W=function(){const t=(0,o.Zp)(),e=(0,o.zy)(),n=(0,d.A)(),{topicId:x,allQuestions:f,flashcards:g,currentCardIndex:j,isLoading:C,error:b,currentCardData:v,handleNextCard:w,handlePreviousCard:y,handleShuffleCards:I}=(()=>{const{topicId:t}=(0,o.g)(),[e,n]=(0,u.useState)([]),[r,i]=(0,u.useState)([]),[a,s]=(0,u.useState)(0),[l,c]=(0,u.useState)(!0),[d,x]=(0,u.useState)(""),h=(0,u.useCallback)((async()=>{if(!t)return x("Topic ID is missing."),void c(!1);c(!0),x("");try{const e=await m.A.get("/api/questions?topicId=".concat(t));if(Array.isArray(e.data)&&e.data.length>0){const t=(0,A.a3)(e.data);n(t);const o=t.map((t=>({id:t.id,frontText:t.text,options:t.options,correctOptionId:t.correctOptionId,explanation:t.explanation})));i((0,A.R3)([...o])),s(0)}else x("No questions found for this topic to create flashcards."),n([]),i([])}catch(r){var e,o;x("Failed to load questions: ".concat((null===(e=r.response)||void 0===e||null===(o=e.data)||void 0===o?void 0:o.message)||r.message)),n([]),i([])}finally{c(!1)}}),[t]);(0,u.useEffect)((()=>{h()}),[h]);const p=(0,u.useMemo)((()=>r.length>0?r[a]:null),[r,a]);return{topicId:t,allQuestions:e,flashcards:r,currentCardIndex:a,isLoading:l,error:d,currentCardData:p,handleNextCard:()=>{r.length>0&&s((t=>(t+1)%r.length))},handlePreviousCard:()=>{r.length>0&&s((t=>(t-1+r.length)%r.length))},handleShuffleCards:()=>{if(e.length>0){const t=e.map((t=>({id:t.id,frontText:t.text,options:t.options,correctOptionId:t.correctOptionId,explanation:t.explanation})));i((0,A.R3)([...t])),s(0)}}}})(),z=e.state||{},S=z.topicName||x.replace(/-/g," "),k=z.subject||"default",P=z.accentColor||U.J[k.toLowerCase()]||n.palette.primary.main;return C?(0,h.jsxs)(r.A,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"80vh",children:[(0,h.jsx)(i.A,{sx:{color:P}}),(0,h.jsx)(a.A,{sx:{ml:2},children:"Loading Flashcards..."})]}):b&&0===f.length?(0,h.jsxs)(r.A,{sx:{p:3,maxWidth:"900px",margin:"auto",textAlign:"center"},children:[(0,h.jsx)(s.A,{severity:"error",children:b}),(0,h.jsx)(l.A,{variant:"outlined",onClick:()=>t(-1),sx:{mt:2,borderColor:P,color:P},children:"Go Back"})]}):C||0!==f.length||b?(0,h.jsxs)(r.A,{sx:{p:{xs:1,sm:2,md:3},maxWidth:"700px",margin:"auto",display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,h.jsxs)(a.A,{variant:"h4",gutterBottom:!0,sx:{color:P,fontWeight:"bold",textAlign:"center",mb:2},children:["Flashcards: ",S]}),b&&g.length>0&&(0,h.jsx)(s.A,{severity:"warning",sx:{mb:2,width:"100%"},children:b}),v&&(0,h.jsx)(H,{currentCard:v,onNextCard:w,onPreviousCard:y,accentColor:P,totalCards:g.length,currentIndex:j}),f.length>1&&(0,h.jsx)(l.A,{variant:"text",onClick:I,startIcon:(0,h.jsx)(p,{}),sx:{color:P,mt:.5,mb:1.5},disabled:C,children:"Shuffle Cards"}),(0,h.jsx)(c.A,{direction:"row",spacing:2,justifyContent:"center",sx:{width:"100%",mt:1},children:(0,h.jsxs)(l.A,{variant:"outlined",onClick:()=>t(k?"/subjects/".concat(k.toLowerCase()):"/subjects"),sx:{borderColor:P,color:P,width:{xs:"100%",sm:"auto"}},children:["Back to ",k&&"default"!==k?k.charAt(0).toUpperCase()+k.slice(1):"Subject"," Topics"]})})]}):(0,h.jsxs)(r.A,{sx:{p:3,maxWidth:"900px",margin:"auto",textAlign:"center"},children:[(0,h.jsx)(a.A,{variant:"h5",children:"No Flashcards Available"}),(0,h.jsxs)(a.A,{children:['No questions were found for "',S,'" to create flashcards.']}),(0,h.jsxs)(l.A,{variant:"outlined",onClick:()=>t(k?"/subjects/".concat(k.toLowerCase()):"/subjects"),sx:{mt:2,borderColor:P,color:P},children:["Back to ",k&&"default"!==k?k.charAt(0).toUpperCase()+k.slice(1):"Subject"," Topics"]})]})}},8480:(t,e,n)=>{n.d(e,{A:()=>r});var o=n(4599);function r(t){const{theme:e,name:n,props:r}=t;return e&&e.components&&e.components[n]&&e.components[n].defaultProps?(0,o.A)(e.components[n].defaultProps,r):r}},9468:(t,e,n)=>{n.d(e,{R3:()=>a,a3:()=>r,u0:()=>i});var o=n(9379);const r=t=>Array.isArray(t)?t.map((t=>{if(!t||"object"!==typeof t)return console.warn("[quizUtils] Encountered invalid item in questionsArray:",t),t;let e=[];if("string"===typeof t.options)try{e=JSON.parse(t.options),Array.isArray(e)||(console.warn("[quizUtils] Parsed options for Q ID ".concat(t.id," is not an array:"),e),e=[])}catch(n){console.error("[quizUtils] Failed to parse options for question ID ".concat(t.id,":"),t.options,n)}else Array.isArray(t.options)?e=t.options:void 0!==t.options&&null!==t.options&&console.warn("[quizUtils] Question ID ".concat(t.id," has unexpected options format (not string or array):"),t.options);return(0,o.A)((0,o.A)({},t),{},{options:e})})):(console.warn("[quizUtils] parseQuestionOptions received non-array input:",t),[]),i=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(n&&null!==o&&void 0!==o&&o.topic_name)return"Challenge: ".concat(o.topic_name);if(n&&e)return"Challenge: ".concat(e);if(n)return"Challenge: ".concat(t?String(t).replace(/-/g," "):"Quiz");if(e&&t&&e!==String(t).replace(/-/g," "))return e;if(!t)return"N/A";let r=String(t).replace(/-/g," ");r=r.replace(/^homibhabha practice /i,"Homi Bhabha Practice - "),r=r.replace(/^pyq /i,"PYQ ");return r=r.replace(/\s(\d+(?:st|nd|rd|th))$/i,((t,e)=>" - Class ".concat(e.toUpperCase()))).trim(),r=r.split(" ").map((t=>"class"===t.toLowerCase()||"std"===t.toLowerCase()?t:t.includes("-")?t.split("-").map((t=>t.charAt(0).toUpperCase()+t.slice(1).toLowerCase())).join("-"):t.charAt(0).toUpperCase()+t.slice(1).toLowerCase())).join(" "),r=r.replace(/Homi Bhabha Practice - (\w+) (\w+)/i,((t,e,n)=>"Homi Bhabha Practice - Std ".concat(e," (").concat(n.charAt(0).toUpperCase()+n.slice(1),")"))),r=r.replace(/Pyq (\w+) (\d+)/i,((t,e,n)=>"PYQ - Std ".concat(e," (").concat(n,")"))),r=r.replace(/Pyq - Class (\w+) \((\d+)\)/i,((t,e,n)=>"PYQ - Std ".concat(e," (").concat(n,")"))),r},a=t=>{if(!t||!Array.isArray(t))return[];let e,n=t.length;for(;0!==n;)e=Math.floor(Math.random()*n),n--,[t[n],t[e]]=[t[e],t[n]];return t}}}]);
//# sourceMappingURL=316.83cbc69b.chunk.js.map