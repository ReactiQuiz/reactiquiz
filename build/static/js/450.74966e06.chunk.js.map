{"version":3,"file":"static/js/450.74966e06.chunk.js","mappings":"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","sources":["../node_modules/@mui/material/esm/ListItemAvatar/listItemAvatarClasses.js","../node_modules/@mui/material/esm/ListItemAvatar/ListItemAvatar.js","pages/AICenterPage.js","hooks/useAICenter.js","../node_modules/@mui/icons-material/esm/Send.js"],"sourcesContent":["import generateUtilityClasses from '@mui/utils/generateUtilityClasses';\nimport generateUtilityClass from '@mui/utils/generateUtilityClass';\nexport function getListItemAvatarUtilityClass(slot) {\n  return generateUtilityClass('MuiListItemAvatar', slot);\n}\nconst listItemAvatarClasses = generateUtilityClasses('MuiListItemAvatar', ['root', 'alignItemsFlexStart']);\nexport default listItemAvatarClasses;","'use client';\n\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport composeClasses from '@mui/utils/composeClasses';\nimport ListContext from \"../List/ListContext.js\";\nimport { styled } from \"../zero-styled/index.js\";\nimport { useDefaultProps } from \"../DefaultPropsProvider/index.js\";\nimport { getListItemAvatarUtilityClass } from \"./listItemAvatarClasses.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst useUtilityClasses = ownerState => {\n  const {\n    alignItems,\n    classes\n  } = ownerState;\n  const slots = {\n    root: ['root', alignItems === 'flex-start' && 'alignItemsFlexStart']\n  };\n  return composeClasses(slots, getListItemAvatarUtilityClass, classes);\n};\nconst ListItemAvatarRoot = styled('div', {\n  name: 'MuiListItemAvatar',\n  slot: 'Root',\n  overridesResolver: (props, styles) => {\n    const {\n      ownerState\n    } = props;\n    return [styles.root, ownerState.alignItems === 'flex-start' && styles.alignItemsFlexStart];\n  }\n})({\n  minWidth: 56,\n  flexShrink: 0,\n  variants: [{\n    props: {\n      alignItems: 'flex-start'\n    },\n    style: {\n      marginTop: 8\n    }\n  }]\n});\n\n/**\n * A simple wrapper to apply `List` styles to an `Avatar`.\n */\nconst ListItemAvatar = /*#__PURE__*/React.forwardRef(function ListItemAvatar(inProps, ref) {\n  const props = useDefaultProps({\n    props: inProps,\n    name: 'MuiListItemAvatar'\n  });\n  const {\n    className,\n    ...other\n  } = props;\n  const context = React.useContext(ListContext);\n  const ownerState = {\n    ...props,\n    alignItems: context.alignItems\n  };\n  const classes = useUtilityClasses(ownerState);\n  return /*#__PURE__*/_jsx(ListItemAvatarRoot, {\n    className: clsx(classes.root, className),\n    ownerState: ownerState,\n    ref: ref,\n    ...other\n  });\n});\nprocess.env.NODE_ENV !== \"production\" ? ListItemAvatar.propTypes /* remove-proptypes */ = {\n  // ┌────────────────────────────── Warning ──────────────────────────────┐\n  // │ These PropTypes are generated from the TypeScript type definitions. │\n  // │    To update them, edit the d.ts file and run `pnpm proptypes`.     │\n  // └─────────────────────────────────────────────────────────────────────┘\n  /**\n   * The content of the component, normally an `Avatar`.\n   */\n  children: PropTypes.node,\n  /**\n   * Override or extend the styles applied to the component.\n   */\n  classes: PropTypes.object,\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n  /**\n   * The system prop that allows defining system overrides as well as additional CSS styles.\n   */\n  sx: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.func, PropTypes.object, PropTypes.bool])), PropTypes.func, PropTypes.object])\n} : void 0;\nexport default ListItemAvatar;","// src/pages/AICenterPage.js\r\nimport { useEffect, useRef } from 'react';\r\nimport { Box, Paper, TextField, IconButton, List, ListItem, ListItemAvatar, Avatar, ListItemText, Typography, CircularProgress, useTheme, Alert } from '@mui/material';\r\nimport SendIcon from '@mui/icons-material/Send';\r\nimport SmartToyIcon from '@mui/icons-material/SmartToy';\r\nimport AccountCircleIcon from '@mui/icons-material/AccountCircle';\r\nimport ReactMarkdown from 'react-markdown'; // <-- 1. Import ReactMarkdown\r\nimport { useAICenter } from '../hooks/useAICenter';\r\nimport { useAuth } from '../contexts/AuthContext';\r\n\r\nfunction AICenterPage() {\r\n    const theme = useTheme();\r\n    const { currentUser } = useAuth();\r\n    const { messages, input, setInput, isLoading, error, handleSendMessage } = useAICenter();\r\n    const messagesEndRef = useRef(null);\r\n\r\n    const scrollToBottom = () => {\r\n        messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n    };\r\n\r\n    useEffect(scrollToBottom, [messages]);\r\n\r\n    const AI_ACCENT_COLOR = theme.palette.info.main;\r\n\r\n    // 2. Define custom components to make Markdown render with MUI's Typography\r\n    // This ensures consistent styling with the rest of your app.\r\n    const markdownComponents = {\r\n        p: ({ node, ...props }) => <Typography variant=\"body1\" paragraph sx={{ mb: 1, '&:last-child': { mb: 0 } }} {...props} />,\r\n        strong: ({ node, ...props }) => <Typography component=\"span\" fontWeight=\"bold\" {...props} />,\r\n        em: ({ node, ...props }) => <Typography component=\"span\" fontStyle=\"italic\" {...props} />,\r\n        ol: ({ node, ...props }) => <ol style={{ paddingInlineStart: '20px', margin: 0 }} {...props} />,\r\n        ul: ({ node, ...props }) => <ul style={{ paddingInlineStart: '20px', margin: 0 }} {...props} />,\r\n        li: ({ node, ...props }) => <li style={{ marginBottom: '4px' }}><Typography component=\"span\" {...props} /></li>,\r\n    };\r\n\r\n    return (\r\n        <Box sx={{ display: 'flex', flexDirection: 'column', height: 'calc(100vh - 64px - 49px)', p: { xs: 1, sm: 2 } }}>\r\n            <Paper elevation={3} sx={{ flexGrow: 1, display: 'flex', flexDirection: 'column', overflow: 'hidden' }}>\r\n                <Box sx={{ p: 2, borderBottom: `1px solid ${theme.palette.divider}`, backgroundColor: theme.palette.background.default }}>\r\n                    <Typography variant=\"h5\" sx={{ color: AI_ACCENT_COLOR, display: 'flex', alignItems: 'center', gap: 1 }}>\r\n                        <SmartToyIcon /> AI Study Center\r\n                    </Typography>\r\n                </Box>\r\n\r\n                <List sx={{ flexGrow: 1, overflowY: 'auto', p: 2 }}>\r\n                    {messages.map((msg, index) => (\r\n                        <ListItem key={index} sx={{ alignItems: 'flex-start', py: 1.5 }}>\r\n                            <ListItemAvatar>\r\n                                <Avatar sx={{ bgcolor: msg.role === 'user' ? theme.palette.secondary.main : AI_ACCENT_COLOR }}>\r\n                                    {msg.role === 'user' ? <AccountCircleIcon /> : <SmartToyIcon />}\r\n                                </Avatar>\r\n                            </ListItemAvatar>\r\n                            <Paper\r\n                                elevation={1}\r\n                                sx={{\r\n                                    p: 1.5,\r\n                                    borderRadius: 3,\r\n                                    bgcolor: msg.isError ? theme.palette.error.dark : (msg.role === 'user' ? 'background.paper' : theme.palette.background.default),\r\n                                    border: msg.role === 'user' ? `1px solid ${theme.palette.divider}` : 'none',\r\n                                    whiteSpace: 'pre-wrap',\r\n                                    wordBreak: 'break-word',\r\n                                    flexGrow: 1,\r\n                                }}\r\n                            >\r\n                                <ListItemText\r\n                                    primary={msg.role === 'user' ? currentUser?.name || 'You' : 'ReactiQuiz AI'}\r\n                                    primaryTypographyProps={{ fontWeight: 'bold', color: msg.isError ? theme.palette.error.contrastText : 'text.primary' }}\r\n                                    // 3. Use ReactMarkdown to render the message text\r\n                                    secondary={\r\n                                        <ReactMarkdown components={markdownComponents}>\r\n                                            {msg.parts[0].text}\r\n                                        </ReactMarkdown>\r\n                                    }\r\n                                    secondaryTypographyProps={{ color: msg.isError ? theme.palette.error.contrastText : 'text.secondary', component: 'div' }}\r\n                                />\r\n                            </Paper>\r\n                        </ListItem>\r\n                    ))}\r\n                    {isLoading && (\r\n                        <ListItem sx={{ justifyContent: 'center' }}>\r\n                           <CircularProgress size={24} sx={{color: AI_ACCENT_COLOR}} />\r\n                           <Typography sx={{ml: 1}} color=\"text.secondary\">Q is thinking...</Typography>\r\n                        </ListItem>\r\n                    )}\r\n                    <div ref={messagesEndRef} />\r\n                </List>\r\n                \r\n                {error && !isLoading && <Alert severity=\"error\" sx={{m: 2, mt: 0}}>{error}</Alert>}\r\n\r\n                <Box component=\"form\" onSubmit={handleSendMessage} sx={{ p: 2, borderTop: `1px solid ${theme.palette.divider}`, backgroundColor: theme.palette.background.default }}>\r\n                    <TextField\r\n                        fullWidth\r\n                        variant=\"outlined\"\r\n                        placeholder=\"Ask about your results, a concept, or exam strategy...\"\r\n                        value={input}\r\n                        onChange={(e) => setInput(e.target.value)}\r\n                        disabled={isLoading}\r\n                        InputProps={{\r\n                            endAdornment: (\r\n                                <IconButton type=\"submit\" color=\"primary\" disabled={isLoading || !input.trim()} sx={{ color: AI_ACCENT_COLOR }}>\r\n                                    <SendIcon />\r\n                                </IconButton>\r\n                            )\r\n                        }}\r\n                    />\r\n                </Box>\r\n            </Paper>\r\n        </Box>\r\n    );\r\n}\r\n\r\nexport default AICenterPage;","// src/hooks/useAICenter.js\r\nimport { useState, useEffect, useCallback, useRef } from 'react';\r\nimport apiClient from '../api/axiosInstance';\r\n\r\nexport const useAICenter = () => {\r\n    const [messages, setMessages] = useState([]);\r\n    const [input, setInput] = useState('');\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [error, setError] = useState(null);\r\n\r\n    // Add an initial greeting from the AI\r\n    useEffect(() => {\r\n        setMessages([\r\n            {\r\n                role: 'model',\r\n                parts: [{ text: \"Hello! I'm Q, your personal study assistant. How can I help you prepare for your exams or analyze your results today?\" }]\r\n            }\r\n        ]);\r\n    }, []);\r\n\r\n    const handleSendMessage = useCallback(async (e) => {\r\n        if (e) e.preventDefault();\r\n        if (!input.trim() || isLoading) return;\r\n\r\n        const userMessage = { role: 'user', parts: [{ text: input }] };\r\n        const currentHistory = [...messages, userMessage];\r\n        \r\n        setMessages(currentHistory);\r\n        setInput('');\r\n        setIsLoading(true);\r\n        setError(null);\r\n\r\n        try {\r\n            // We only need to send the history *before* the user's latest message\r\n            const historyForApi = messages;\r\n            const response = await apiClient.post('/api/ai/chat', {\r\n                history: historyForApi,\r\n                message: input.trim(),\r\n            });\r\n\r\n            const modelMessage = { role: 'model', parts: [{ text: response.data.response }] };\r\n            setMessages(prev => [...prev, modelMessage]);\r\n\r\n        } catch (err) {\r\n            const errorMessage = err.response?.data?.error || 'Sorry, something went wrong. Please try again.';\r\n            setError(errorMessage);\r\n            setMessages(prev => [...prev, { role: 'model', parts: [{ text: errorMessage }], isError: true }]);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    }, [input, isLoading, messages]);\r\n\r\n    return {\r\n        messages,\r\n        input,\r\n        setInput,\r\n        isLoading,\r\n        error,\r\n        handleSendMessage\r\n    };\r\n};","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z\"\n}), 'Send');"],"names":["getListItemAvatarUtilityClass","slot","generateUtilityClass","generateUtilityClasses","_excluded","ListItemAvatarRoot","styled","name","overridesResolver","props","styles","ownerState","root","alignItems","alignItemsFlexStart","minWidth","flexShrink","variants","style","marginTop","React","inProps","ref","useDefaultProps","className","other","_objectWithoutProperties","context","ListContext","_objectSpread","classes","slots","composeClasses","useUtilityClasses","_jsx","clsx","theme","useTheme","currentUser","useAuth","messages","input","setInput","isLoading","error","handleSendMessage","useAICenter","setMessages","useState","setIsLoading","setError","useEffect","role","parts","text","useCallback","async","e","preventDefault","trim","userMessage","currentHistory","historyForApi","modelMessage","apiClient","post","history","message","data","response","prev","err","_err$response","_err$response$data","errorMessage","isError","messagesEndRef","useRef","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","AI_ACCENT_COLOR","palette","info","main","markdownComponents","p","_ref","node","Typography","variant","paragraph","sx","mb","strong","_ref2","_excluded2","component","fontWeight","em","_ref3","_excluded3","fontStyle","ol","_ref4","_excluded4","paddingInlineStart","margin","ul","_ref5","_excluded5","li","_ref6","_excluded6","marginBottom","children","Box","display","flexDirection","height","xs","sm","_jsxs","Paper","elevation","flexGrow","overflow","borderBottom","concat","divider","backgroundColor","background","default","color","gap","SmartToyIcon","List","overflowY","map","msg","index","ListItem","py","ListItemAvatar","Avatar","bgcolor","secondary","AccountCircleIcon","borderRadius","dark","border","whiteSpace","wordBreak","ListItemText","primary","primaryTypographyProps","contrastText","ReactMarkdown","components","secondaryTypographyProps","justifyContent","CircularProgress","size","ml","Alert","severity","m","mt","onSubmit","borderTop","TextField","fullWidth","placeholder","value","onChange","target","disabled","InputProps","endAdornment","IconButton","type","SendIcon","createSvgIcon","d"],"sourceRoot":""}