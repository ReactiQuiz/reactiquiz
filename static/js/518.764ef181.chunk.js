"use strict";(self.webpackChunkreactiquiz=self.webpackChunkreactiquiz||[]).push([[518],{1202:(e,t,r)=>{r.d(t,{A:()=>L});var a=r(9379),n=r(45),s=r(5043),o=r(8387),i=r(9826),l=r(1807),d=r(4167),c=r(7194),u=r(8128),p=r(267),m=r(1612),g=r(4412),f=r(8301),v=r(5895),y=r(9857),w=r(6061);function x(e){return(0,w.Ay)("MuiLink",e)}const h=(0,y.A)("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]);var b=r(159);const A=e=>{let{theme:t,ownerState:r}=e;const a=r.color,n=(0,b.Yn)(t,"palette.".concat(a,".main"),!1)||(0,b.Yn)(t,"palette.".concat(a),!1)||r.color,s=(0,b.Yn)(t,"palette.".concat(a,".mainChannel"))||(0,b.Yn)(t,"palette.".concat(a,"Channel"));return"vars"in t&&s?"rgba(".concat(s," / 0.4)"):(0,i.X4)(n,.4)};var S=r(579);const P=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],C={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},k=(0,u.Ay)(v.A,{name:"MuiLink",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t["underline".concat((0,c.A)(r.underline))],"button"===r.component&&t.button]}})((0,m.A)((e=>{let{theme:t}=e;return{variants:[{props:{underline:"none"},style:{textDecoration:"none"}},{props:{underline:"hover"},style:{textDecoration:"none","&:hover":{textDecoration:"underline"}}},{props:{underline:"always"},style:{textDecoration:"underline","&:hover":{textDecorationColor:"inherit"}}},{props:e=>{let{underline:t,ownerState:r}=e;return"always"===t&&"inherit"!==r.color},style:{textDecorationColor:"var(--Link-underlineColor)"}},...Object.entries(t.palette).filter((0,g.A)()).map((e=>{let[r]=e;return{props:{underline:"always",color:r},style:{"--Link-underlineColor":t.vars?"rgba(".concat(t.vars.palette[r].mainChannel," / 0.4)"):(0,i.X4)(t.palette[r].main,.4)}}})),{props:{underline:"always",color:"textPrimary"},style:{"--Link-underlineColor":t.vars?"rgba(".concat(t.vars.palette.text.primaryChannel," / 0.4)"):(0,i.X4)(t.palette.text.primary,.4)}},{props:{underline:"always",color:"textSecondary"},style:{"--Link-underlineColor":t.vars?"rgba(".concat(t.vars.palette.text.secondaryChannel," / 0.4)"):(0,i.X4)(t.palette.text.secondary,.4)}},{props:{underline:"always",color:"textDisabled"},style:{"--Link-underlineColor":(t.vars||t).palette.text.disabled}},{props:{component:"button"},style:{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},["&.".concat(h.focusVisible)]:{outline:"auto"}}}]}}))),L=s.forwardRef((function(e,t){const r=(0,f.b)({props:e,name:"MuiLink"}),i=(0,p.A)(),{className:u,color:m="primary",component:g="a",onBlur:v,onFocus:y,TypographyClasses:w,underline:h="always",variant:b="inherit",sx:L}=r,O=(0,n.A)(r,P),[R,I]=s.useState(!1),N=(0,a.A)((0,a.A)({},r),{},{color:m,component:g,focusVisible:R,underline:h,variant:b}),D=(e=>{const{classes:t,component:r,focusVisible:a,underline:n}=e,s={root:["root","underline".concat((0,c.A)(n)),"button"===r&&"button",a&&"focusVisible"]};return(0,l.A)(s,x,t)})(N);return(0,S.jsx)(k,(0,a.A)((0,a.A)({color:m,className:(0,o.A)(D.root,u),classes:w,component:g,onBlur:e=>{(0,d.A)(e.target)||I(!1),v&&v(e)},onFocus:e=>{(0,d.A)(e.target)&&I(!0),y&&y(e)},ref:t,ownerState:N,variant:b},O),{},{sx:[...void 0===C[m]?[{color:m}]:[],...Array.isArray(L)?L:[L]],style:(0,a.A)((0,a.A)({},O.style),"always"===h&&"inherit"!==m&&!C[m]&&{"--Link-underlineColor":A({theme:i,ownerState:N})})}))}))},2549:(e,t,r)=>{r.d(t,{A:()=>l});r(5043);var a=r(267),n=r(3969),s=r(5895),o=r(9826),i=r(579);const l=function(e){let{variant:t="login"}=e;const r=(0,a.A)(),l="linear-gradient(135deg, ".concat((0,o.X4)(r.palette.primary.dark,.95)," 0%, ").concat((0,o.X4)(r.palette.secondary.dark,.9)," 100%)"),d="linear-gradient(135deg, ".concat((0,o.X4)(r.palette.success.dark,.95)," 0%, ").concat((0,o.X4)(r.palette.info.dark,.9)," 100%)"),c="login"===t;return(0,i.jsxs)(n.A,{sx:{height:"100%",p:4,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",textAlign:"center",color:r.palette.common.white,background:c?l:d},children:[(0,i.jsx)(s.A,{variant:"h3",component:"h1",sx:{fontWeight:"bold",mb:2},children:"ReactiQuiz"}),(0,i.jsx)(s.A,{variant:"h5",sx:{fontWeight:"medium"},children:c?"Welcome Back!":"Join the Community"}),(0,i.jsx)(s.A,{variant:"body1",sx:{mt:1.5,maxWidth:"350px",color:(0,o.X4)(r.palette.common.white,.8)},children:c?"Sign in to continue your learning journey, view your progress, and challenge your friends.":"Create an account to save your progress, compete with friends, and unlock your full potential."})]})}},8121:(e,t,r)=>{r.d(t,{V:()=>o});var a=r(5043),n=r(411),s=r(5016);const o=()=>{const{login:e}=(0,s.A)(),[t,r]=(0,a.useState)(""),[o,i]=(0,a.useState)(""),[l,d]=(0,a.useState)(!1),[c,u]=(0,a.useState)(""),[p,m]=(0,a.useState)(""),[g,f]=(0,a.useState)(""),[v,y]=(0,a.useState)(!1),[w,x]=(0,a.useState)(""),[h,b]=(0,a.useState)(""),[A,S]=(0,a.useState)(""),[P,C]=(0,a.useState)(""),[k,L]=(0,a.useState)(""),[O,R]=(0,a.useState)(""),[I,N]=(0,a.useState)(""),[D,F]=(0,a.useState)(""),[T,q]=(0,a.useState)(""),[X,j]=(0,a.useState)(""),z=(0,a.useCallback)((()=>{r(""),i("")}),[]);return{formError:t,successMessage:o,isSubmitting:l,loginIdentifier:c,setLoginIdentifier:u,loginPassword:p,setLoginPassword:m,loginOtp:g,setLoginOtp:f,showLoginOtpInput:v,setShowLoginOtpInput:y,registerIdentifier:w,setRegisterIdentifier:x,registerEmail:h,setRegisterEmail:b,registerPassword:A,setRegisterPassword:S,registerConfirmPassword:P,setRegisterConfirmPassword:C,registerAddress:k,setRegisterAddress:L,registerClass:O,setRegisterClass:R,forgotPasswordIdentifier:I,setForgotPasswordIdentifier:N,forgotPasswordOtp:D,setForgotPasswordOtp:F,forgotPasswordNewPassword:T,setForgotPasswordNewPassword:q,forgotPasswordConfirmNewPassword:X,setForgotPasswordConfirmNewPassword:j,handleLoginSubmit:async()=>{if(z(),c.trim()&&p.trim()){d(!0);try{const e=await n.A.post("/api/users/login",{identifier:c.trim(),password:p});i(e.data.message||"OTP has been sent."),y(!0)}catch(a){var e,t;r((null===(e=a.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Login failed."),y(!1)}finally{d(!1)}}else r("Username and password are required.")},handleLoginOtpSubmit:async()=>{if(z(),g.trim()&&6===g.length&&/^\d+$/.test(g)){d(!0);try{var t,a;const s=function(){let e=localStorage.getItem("reactiquiz_device_id");if(!e){e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}));try{localStorage.setItem("reactiquiz_device_id",e)}catch(t){return console.error("Error setting device ID in localStorage:",t),"fallback-device-id-"+Date.now()}}return e}(),o=await n.A.post("/api/users/verify-otp",{identifier:c.trim(),otp:g.trim(),deviceIdFromClient:s});null!==(t=o.data)&&void 0!==t&&t.user&&null!==(a=o.data)&&void 0!==a&&a.token?e(o.data.user,o.data.token):r(o.data.message||"OTP verification failed.")}catch(i){var s,o;r((null===(s=i.response)||void 0===s||null===(o=s.data)||void 0===o?void 0:o.message)||"Error verifying OTP.")}finally{d(!1)}}else r("Please enter a valid 6-digit OTP.")},handleRegisterSubmit:async e=>{if(z(),!w.trim()||!h.trim()||!A.trim()||!k.trim()||!O.trim())return void r("All fields are required.");if(A!==P)return void r("Passwords do not match.");if(A.length<6)return void r("Password must be at least 6 characters long.");if(!/\S+@\S+\.\S+/.test(h))return void r("Invalid email format.");const t=parseInt(O);if(isNaN(t)||t<=0||t>12)r("Class must be a valid number (e.g., 6-12).");else{d(!0);try{const r=await n.A.post("/api/users/register",{identifier:w.trim(),email:h.trim().toLowerCase(),password:A,address:k.trim(),class:String(t)});i(r.data.message||"Registration successful!"),e&&e(w.trim())}catch(o){var a,s;r((null===(a=o.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message)||"Registration failed.")}finally{d(!1)}}},handleRequestResetOtp:async()=>{if(z(),I.trim()){d(!0);try{const e=await n.A.post("/api/users/request-password-reset",{identifier:I.trim()});return i(e.data.message||"If an account exists, an OTP has been sent."),!0}catch(a){var e,t;return r((null===(e=a.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Failed to request OTP."),!1}finally{d(!1)}}else r("Please enter your username.")},handleResetPasswordWithOtp:async e=>{if(z(),D.trim()&&6===D.length)if(!T||T.length<6)r("New password must be at least 6 characters.");else if(T===X){d(!0);try{const t=await n.A.post("/api/users/reset-password-with-otp",{identifier:I.trim(),otp:D.trim(),newPassword:T});i(t.data.message||"Password reset successfully."),e&&e(I.trim())}catch(s){var t,a;r((null===(t=s.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||"Failed to reset password.")}finally{d(!1)}}else r("New passwords do not match.");else r("Please enter a valid 6-digit OTP.")},clearFormStates:z}}}}]);
//# sourceMappingURL=518.764ef181.chunk.js.map